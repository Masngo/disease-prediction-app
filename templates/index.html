<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Report: Disease Prediction with Machine Learning</title>
    <!-- Use Tailwind CSS for a modern, utility-first approach to styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Import Chart.js and the Datalabels plugin for dynamic visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <!-- Use Inter font for a clean, professional typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Define a custom color palette and font for a cohesive design */
        :root {
            --primary-bg: #FDFBF8;
            --secondary-bg: #FFFFFF;
            --primary-text: #111827;
            --secondary-text: #4B5563;
            --accent-color: #3B82F6;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-bg);
            color: var(--primary-text);
        }
        /* Custom styles for navigation links to add a subtle hover effect */
        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--accent-color);
            transition: width 0.3s ease;
        }
        .nav-link.active::after,
        .nav-link:hover::after {
            width: 100%;
        }
        /* Style for the ML pipeline steps to make the active step more prominent */
        .step-item.active .step-circle {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        .step-item.active .step-title {
            color: var(--accent-color);
            font-weight: 600;
        }
        /* Style for the interactive model cards to highlight the selected card */
        .model-card.active {
            border-color: var(--accent-color);
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.2), 0 2px 4px -1px rgba(59, 130, 246, 0.1);
            transform: translateY(-2px);
            transition: all 0.2s ease-in-out;
        }
        /* Responsive chart containers for better visualization on all screen sizes */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body class="bg-primary">

    <!-- Header and Navigation -->
    <header class="bg-secondary/80 backdrop-blur-sm sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#overview" class="text-xl font-bold text-primary">ML Disease Prediction</a>
            <div class="hidden md:flex space-x-8">
                <a href="#overview" class="nav-link text-gray-600 hover:text-blue-500 active">Overview</a>
                <a href="#pipeline" class="nav-link text-gray-600 hover:text-blue-500">The Pipeline</a>
                <a href="#models" class="nav-link text-gray-600 hover:text-blue-500">Model Deep Dive</a>
                <a href="#evaluation" class="nav-link text-gray-600 hover:text-blue-500">Evaluation Lab</a>
                <a href="#disease-models" class="nav-link text-gray-600 hover:text-blue-500">Disease Models</a>
                <a href="#prediction-app" class="nav-link text-gray-600 hover:text-blue-500">Prediction App</a>
                <a href="#deployment" class="nav-link text-gray-600 hover:text-blue-500">Deployment & Ethics</a>
            </div>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden text-gray-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </nav>
        <!-- Mobile Menu Dropdown -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="#overview" class="block nav-link text-gray-600">Overview</a>
            <a href="#pipeline" class="block nav-link text-gray-600">The Pipeline</a>
            <a href="#models" class="block nav-link text-gray-600">Model Deep Dive</a>
            <a href="#evaluation" class="block nav-link text-gray-600">Evaluation Lab</a>
            <a href="#disease-models" class="block nav-link text-gray-600">Disease Models</a>
            <a href="#prediction-app" class="block nav-link text-gray-600">Prediction App</a>
            <a href="#deployment" class="block nav-link text-gray-600">Deployment & Ethics</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <!-- Overview Section -->
        <section id="overview" class="text-center min-h-[60vh] flex flex-col justify-center items-center">
            <h2 class="text-4xl md:text-5xl font-bold text-primary mb-4">The AI-Driven Healthcare Revolution</h2>
            <p class="max-w-3xl mx-auto text-lg text-secondary leading-relaxed">
                This interactive report explores the end-to-end implementation of a machine learning system for disease prediction. We'll journey from raw data to a deployed application, uncovering the technical processes, critical decisions, and ethical considerations that shape the future of proactive, data-driven medicine.
            </p>
        </section>

        <!-- The ML Pipeline Section -->
        <section id="pipeline" class="py-16 md:py-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-primary">The End-to-End ML Pipeline</h2>
                <p class="mt-2 text-lg text-secondary max-w-2xl mx-auto">A successful system is built on a structured, multi-stage pipeline. Click on each step below to learn about its role in transforming raw data into a reliable predictive model.</p>
            </div>
            <div class="relative">
                <div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-gray-300 -translate-y-1/2"></div>
                <div class="grid grid-cols-2 md:grid-cols-5 gap-8 relative">
                    <div class="step-item text-center cursor-pointer p-4 transition-all duration-300" data-step="1">
                        <div class="step-circle mx-auto w-16 h-16 rounded-full border-2 border-gray-300 flex items-center justify-center text-2xl font-bold text-gray-400 bg-secondary transition-all duration-300">1</div>
                        <h3 class="step-title mt-4 font-semibold text-gray-700 transition-colors duration-300">Data Sourcing & Prep</h3>
                    </div>
                    <div class="step-item text-center cursor-pointer p-4 transition-all duration-300" data-step="2">
                        <div class="step-circle mx-auto w-16 h-16 rounded-full border-2 border-gray-300 flex items-center justify-center text-2xl font-bold text-gray-400 bg-secondary transition-all duration-300">2</div>
                        <h3 class="step-title mt-4 font-semibold text-gray-700 transition-colors duration-300">Model Selection</h3>
                    </div>
                    <div class="step-item text-center cursor-pointer p-4 transition-all duration-300" data-step="3">
                        <div class="step-circle mx-auto w-16 h-16 rounded-full border-2 border-gray-300 flex items-center justify-center text-2xl font-bold text-gray-400 bg-secondary transition-all duration-300">3</div>
                        <h3 class="step-title mt-4 font-semibold text-gray-700 transition-colors duration-300">Training</h3>
                    </div>
                    <div class="step-item text-center cursor-pointer p-4 transition-all duration-300" data-step="4">
                        <div class="step-circle mx-auto w-16 h-16 rounded-full border-2 border-gray-300 flex items-center justify-center text-2xl font-bold text-gray-400 bg-secondary transition-all duration-300">4</div>
                        <h3 class="step-title mt-4 font-semibold text-gray-700 transition-colors duration-300">Evaluation</h3>
                    </div>
                    <div class="step-item text-center cursor-pointer p-4 transition-all duration-300" data-step="5">
                        <div class="step-circle mx-auto w-16 h-16 rounded-full border-2 border-gray-300 flex items-center justify-center text-2xl font-bold text-gray-400 bg-secondary transition-all duration-300">5</div>
                        <h3 class="step-title mt-4 font-semibold text-gray-700 transition-colors duration-300">Deployment</h3>
                    </div>
                </div>
            </div>
            <div id="pipeline-details" class="mt-12 bg-secondary p-8 rounded-lg shadow-md min-h-[200px] flex items-center justify-center">
                <p class="text-center text-gray-500">Click a step to see details here.</p>
            </div>
        </section>

        <!-- Model Deep Dive Section -->
        <section id="models" class="py-16 md:py-24 bg-secondary -mx-6 px-6 rounded-xl">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-primary">Model Deep Dive</h2>
                <p class="mt-2 text-lg text-secondary max-w-2xl mx-auto">Different problems require different tools. Explore the key algorithms used for disease prediction and see a visual comparison of their strengths.</p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="model-card p-6 border rounded-lg hover:shadow-lg transition-shadow duration-300 cursor-pointer" data-model="dt">
                    <h3 class="text-xl font-semibold text-primary">Decision Tree</h3>
                    <p class="text-secondary mt-2 text-sm">A highly interpretable, rule-based model that mimics human decision-making.</p>
                </div>
                <div class="model-card p-6 border rounded-lg hover:shadow-lg transition-shadow duration-300 cursor-pointer" data-model="rf">
                    <h3 class="text-xl font-semibold text-primary">Random Forest</h3>
                    <p class="text-secondary mt-2 text-sm">An ensemble of many decision trees, prized for its high accuracy and robustness.</p>
                </div>
                <div class="model-card p-6 border rounded-lg hover:shadow-lg transition-shadow duration-300 cursor-pointer" data-model="svm">
                    <h3 class="text-xl font-semibold text-primary">Support Vector Machine</h3>
                    <p class="text-secondary mt-2 text-sm">A powerful classifier that finds the optimal boundary between classes, effective in complex datasets.</p>
                </div>
                <div class="model-card p-6 border rounded-lg hover:shadow-lg transition-shadow duration-300 cursor-pointer" data-model="nb">
                    <h3 class="text-xl font-semibold text-primary">Naive Bayes</h3>
                    <p class="text-secondary mt-2 text-sm">A fast, simple probabilistic classifier that performs well with large datasets.</p>
                </div>
                <div class="model-card p-6 border rounded-lg hover:shadow-lg transition-shadow duration-300 cursor-pointer" data-model="lr">
                    <h3 class="text-xl font-semibold text-primary">Logistic Regression</h3>
                    <p class="text-secondary mt-2 text-sm">A linear model that provides probabilities, valued for its simplicity and interpretability.</p>
                </div>
            </div>
            <div class="mt-12 flex flex-col md:flex-row items-center gap-8">
                <div class="w-full md:w-1/2">
                    <div class="chart-container">
                        <canvas id="modelComparisonChart"></canvas>
                    </div>
                </div>
                <div id="model-details" class="w-full md:w-1/2 p-6 bg-gray-50 rounded-lg">
                     <h3 id="model-detail-title" class="text-2xl font-bold text-primary mb-4">Select a Model</h3>
                     <p id="model-detail-text" class="text-secondary">Click on a model card to see its detailed characteristics and how its strengths compare visually on the chart.</p>
                </div>
            </div>
        </section>

        <!-- Evaluation Lab Section -->
        <section id="evaluation" class="py-16 md:py-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-primary">The Evaluation Lab</h2>
                <p class="mt-2 text-lg text-secondary max-w-2xl mx-auto">In healthcare, not all errors are equal. A missed diagnosis is far more dangerous than a false alarm. This lab demonstrates why choosing the right performance metric is critical.</p>
            </div>
            <div class="flex flex-col md:flex-row gap-8 items-center">
                <div class="w-full md:w-1/2">
                    <div class="mb-4">
                        <label for="metric-selector" class="block text-sm font-medium text-gray-700">Select a Metric to Analyze:</label>
                        <select id="metric-selector" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm transition-all duration-200">
                            <option value="accuracy">Accuracy</option>
                            <option value="precision">Precision</option>
                            <option value="recall" selected>Recall</option>
                            <option value="f1">F1-Score</option>
                        </select>
                    </div>
                    <div id="metric-explanation" class="p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg">
                        <h4 class="font-bold text-blue-800">Why is this important?</h4>
                        <p class="text-sm text-blue-700 mt-1"></p>
                    </div>
                </div>
                <div class="w-full md:w-1/2">
                    <div class="chart-container h-64 md:h-80">
                        <canvas id="evaluationMetricChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Disease-Specific Models Section -->
        <section id="disease-models" class="py-16 md:py-24 bg-gray-50 -mx-6 px-6 rounded-xl">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-primary">Disease-Specific Models in Action</h2>
                <p class="mt-2 text-lg text-secondary max-w-2xl mx-auto">See how a machine learning model would work for specific diseases. Select a disease from the dropdown to see its defining symptoms, the recommended ML model, and its performance metrics in a hypothetical scenario.</p>
            </div>
            <div class="flex flex-col md:flex-row gap-8 items-start">
                <div class="w-full md:w-1/3">
                    <label for="disease-selector" class="block text-sm font-medium text-gray-700">Select a Disease:</label>
                    <select id="disease-selector" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm transition-all duration-200">
                        <option value="heart_disease">Heart Disease</option>
                        <option value="diabetes">Diabetes</option>
                        <option value="parkinsons">Parkinson's Disease</option>
                        <option value="liver_disease">Liver Disease</option>
                    </select>
                    <div id="disease-details-container" class="mt-8 bg-white p-6 rounded-lg shadow-md border">
                        <h3 class="text-xl font-bold text-primary mb-2">Heart Disease Prediction</h3>
                        <p class="text-secondary text-sm">Symptoms are key indicators for an ML model. For heart disease, the most impactful features often include:</p>
                        <ul id="symptoms-list" class="list-disc list-inside mt-2 text-secondary text-sm space-y-1"></ul>
                        <p class="text-secondary text-sm mt-4">The recommended model for this use case is a <span class="font-semibold text-blue-600">Support Vector Machine (SVM)</span>, due to its effectiveness in finding complex patterns in patient data.</p>
                    </div>
                </div>
                <div class="w-full md:w-2/3 space-y-8">
                    <div class="bg-white p-6 rounded-lg shadow-md border">
                        <h3 class="text-xl font-bold text-primary mb-4">Model Performance</h3>
                        <div class="chart-container">
                             <canvas id="diseaseEvaluationChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md border">
                        <h3 class="text-xl font-bold text-primary mb-4">Key Symptom Importance</h3>
                        <p class="text-sm text-secondary mb-4">This chart shows the relative importance of different symptoms or features in the model's prediction, with higher values indicating a stronger influence.</p>
                        <div class="chart-container">
                             <canvas id="featureImportanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Prediction App Section -->
        <section id="prediction-app" class="py-16 md:py-24 bg-primary -mx-6 px-6 rounded-xl">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-primary">Interactive Prediction App</h2>
                <p class="mt-2 text-lg text-secondary max-w-2xl mx-auto">See how a machine learning model would work in a real-world scenario. Select the symptoms you are experiencing from the list below and click 'Predict Disease' to get a simulated result.</p>
            </div>
            <div class="max-w-3xl mx-auto bg-secondary p-8 rounded-lg shadow-xl">
                <h3 class="text-2xl font-semibold text-primary mb-6">Select Your Symptoms</h3>
                <form id="prediction-form" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="chest_pain" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Chest Pain</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="frequent_urination" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Frequent Urination</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="dizziness" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Dizziness</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="yellowing_of_skin" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Yellowing of Skin</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="tremor_in_hands" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Tremor in Hands</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="fatigue" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Fatigue</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="shortness_of_breath" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Shortness of Breath</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="rigid_muscles" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Rigid Muscles</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="increased_thirst" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Increased Thirst</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="abdominal_swelling" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Abdominal Swelling</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="unexplained_weight_loss" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Unexplained Weight Loss</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" name="symptoms" value="blurred_vision" class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700">Blurred Vision</span>
                    </label>
                </form>
                <div class="mt-8 flex justify-center space-x-4">
                    <button id="predict-button" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200">
                        Predict Disease
                    </button>
                    <button id="reset-button" class="px-6 py-3 bg-gray-200 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 transition-colors duration-200">
                        Reset
                    </button>
                </div>
                <div id="prediction-result" class="mt-8 p-6 rounded-lg bg-gray-100 hidden">
                    <h4 class="text-lg font-semibold text-primary mb-2">Prediction Result</h4>
                    <p id="prediction-text" class="text-lg text-primary"></p>
                    <div class="mt-4 w-full bg-gray-200 rounded-full h-2.5">
                        <div id="confidence-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-500 ease-out" style="width: 0;"></div>
                    </div>
                </div>
                <div id="warning-message" class="mt-4 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 rounded-r-lg hidden">
                    <p class="font-semibold">Disclaimer:</p>
                    <p class="text-sm">This is a simulated prediction for illustrative purposes only. Consult a healthcare professional for a medical diagnosis.</p>
                </div>
            </div>
        </section>

        <!-- Deployment & Ethics Section -->
        <section id="deployment" class="py-16 md:py-24 bg-secondary -mx-6 px-6 rounded-xl">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-primary">Deployment & Ethics</h2>
                <p class="mt-2 text-lg text-secondary max-w-2xl mx-auto">Bringing a model to life involves technical deployment choices and navigating a complex ethical landscape to ensure patient safety, privacy, and equity.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-12">
                <div>
                    <h3 class="text-2xl font-semibold text-primary mb-6 text-center">The Path to Production</h3>
                    <div class="grid grid-cols-1 gap-8">
                         <div class="bg-white p-6 rounded-lg border shadow-sm hover:shadow-md transition-shadow">
                            <h4 class="font-bold text-lg">Web Frameworks</h4>
                            <p class="text-sm text-secondary mt-2">Choosing between a lightweight tool like <span class="font-semibold text-blue-600">Flask</span> for rapid prototyping or a full-featured framework like <span class="font-semibold text-green-600">Django</span> for scalable applications.</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg border shadow-sm hover:shadow-md transition-shadow">
                            <h4 class="font-bold text-lg">Hosting Platforms</h4>
                            <p class="text-sm text-secondary mt-2">Deciding between a simple, developer-friendly platform like <span class="font-semibold text-purple-600">Heroku</span> or a powerful, configurable infrastructure like <span class="font-semibold text-orange-600">AWS</span> for enterprise-grade solutions.</p>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold text-primary mb-6 text-center">Beyond the Code: Critical Considerations</h3>
                    <div class="space-y-4">
                        <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                            <h4 class="font-bold text-red-800">Data Privacy & HIPAA</h4>
                            <p class="text-sm text-red-700 mt-1">Ensuring patient data is protected under strict regulations, and addressing the risk of re-identification from "anonymized" data.</p>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <h4 class="font-bold text-yellow-800">Algorithmic Bias</h4>
                            <p class="text-sm text-yellow-700 mt-1">Recognizing that models trained on unrepresentative data can amplify existing health disparities, leading to inequitable care.</p>
                        </div>
                        <div class="bg-gray-100 p-4 rounded-lg border border-gray-200">
                            <h4 class="font-bold text-gray-800">The Human in the Loop</h4>
                            <p class="text-sm text-gray-700 mt-1">ML models are powerful decision-support tools, but a clinician's expertise and judgment remain essential for patient care and building trust.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>&copy; 2025 Interactive Health Analytics. All rights reserved.</p>
            <p class="text-sm text-gray-400 mt-2">This application is an interactive summary of the report "Disease Prediction Using Machine Learning."</p>
        </div>
    </footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {

        // Data for each section of the report. This keeps the content and logic separate for better organization.
        const pipelineContent = {
            1: {
                title: 'Data Sourcing & Preparation',
                text: 'This is the foundation. It involves sourcing quality datasets (often synthetic, from platforms like Kaggle, to protect privacy), cleaning the data, handling missing values, and crucial steps like feature engineering and balancing classes to prevent model bias towards common diseases.'
            },
            2: {
                title: 'Model Selection',
                text: 'Choosing the right algorithm is key. This involves understanding the trade-offs between interpretability (like a Decision Tree) and predictive power (like a Random Forest or SVM). The choice depends on the specific medical context and project goals.'
            },
            3: {
                title: 'Model Training',
                text: 'The selected models learn patterns from the prepared data. This is often done in accessible environments like Google Colab, which provides free computing resources. The model adjusts its internal parameters to map patient symptoms to the correct disease diagnoses.'
            },
            4: {
                title: 'Robust Evaluation',
                text: 'Before deployment, the model\'s performance is rigorously tested on unseen data. This phase focuses on metrics beyond simple accuracy, such as Precision and Recall, to ensure the model is truly effective and safe for medical use.'
            },
            5: {
                title: 'Deployment',
                text: 'The validated model is integrated into a web application using frameworks like Flask or Django and hosted on cloud platforms like Heroku or AWS. This makes the model accessible to end-users like clinicians for real-time predictions.'
            }
        };

        const modelData = {
            dt: { name: 'Decision Tree', scores: [3, 5, 2, 4], text: 'Best for its high interpretability. The tree-like structure makes it easy for clinicians to understand and trust the model\'s reasoning, even if its predictive power is lower than more complex models.' },
            rf: { name: 'Random Forest', scores: [5, 3, 5, 4], text: 'Excels in accuracy and robustness. By combining many trees, it avoids overfitting and handles complex data well, making it a powerful and reliable choice when prediction performance is the top priority.' },
            svm: { name: 'Support Vector Machine', scores: [4, 2, 5, 3], text: 'Highly effective in complex, high-dimensional spaces. Its "kernel trick" allows it to find intricate patterns, making it ideal for tasks like medical image analysis, though it can be less intuitive to interpret.' },
            nb: { name: 'Naive Bayes', scores: [2, 4, 3, 5], text: 'Valued for its speed and simplicity. It performs surprisingly well on large datasets with many features, but its assumption of feature independence can be a limitation.' },
            lr: { name: 'Logistic Regression', scores: [3, 5, 2, 4], text: 'A straightforward and interpretable linear model. It provides clear probabilistic outputs, making it easy to understand the model\'s confidence in its predictions. It\'s a solid choice for simpler classification tasks.' }
        };

        const metricData = {
            accuracy: { 
                score: 95, 
                text: 'Accuracy measures overall correctness. A 95% score seems high, but it can be misleading if a disease is rare. The model could achieve this by simply always predicting "no disease."' 
            },
            precision: { 
                score: 75, 
                text: 'Precision answers: "Of all patients predicted to have the disease, how many actually did?" A lower score means more false alarms (healthy patients told they are sick).' 
            },
            recall: { 
                score: 98, 
                text: 'Recall answers: "Of all patients who truly had the disease, how many did we catch?" This is often the most critical metric. A high recall means very few sick patients are missed (low false negatives).' 
            },
            f1: { 
                score: 85, 
                text: 'The F1-Score is the balance between Precision and Recall. It\'s a more robust measure than accuracy, especially for imbalanced datasets, providing a single score that reflects both false positives and false negatives.' 
            }
        };

        const diseaseModelsData = {
            heart_disease: {
                name: 'Heart Disease',
                model: 'Support Vector Machine (SVM)',
                symptoms: ['Chest pain', 'Shortness of breath', 'Irregular heartbeat', 'Dizziness', 'Fatigue'],
                metrics: { accuracy: 91, precision: 88, recall: 95, f1: 91 },
                features: [ {name: 'Chest Pain Type', importance: 0.8}, {name: 'Max Heart Rate', importance: 0.75}, {name: 'Exercise Induced Angina', importance: 0.65}, {name: 'Age', importance: 0.5}, {name: 'Cholesterol Level', importance: 0.4} ]
            },
            diabetes: {
                name: 'Diabetes',
                model: 'Logistic Regression',
                symptoms: ['High blood sugar', 'Frequent urination', 'Increased thirst', 'Unexplained weight loss', 'Blurred vision'],
                metrics: { accuracy: 85, precision: 82, recall: 89, f1: 85 },
                features: [ {name: 'Plasma Glucose', importance: 0.9}, {name: 'BMI', importance: 0.7}, {name: 'Age', importance: 0.6}, {name: 'Insulin Level', importance: 0.55}, {name: 'Blood Pressure', importance: 0.45} ]
            },
            parkinsons: {
                name: 'Parkinson\'s Disease',
                model: 'Random Forest',
                symptoms: ['Tremor in hands or limbs', 'Slowed movement', 'Rigid muscles', 'Impaired posture and balance', 'Speech changes'],
                metrics: { accuracy: 94, precision: 92, recall: 96, f1: 94 },
                features: [ {name: 'Vocal Tremor Frequency', importance: 0.95}, {name: 'Jitter', importance: 0.85}, {name: 'Shimmer', importance: 0.75}, {name: 'Speaking Pitch', importance: 0.6}, {name: 'Voice Harmonics', importance: 0.5} ]
            },
            liver_disease: {
                name: 'Liver Disease',
                model: 'Naive Bayes',
                symptoms: ['Yellowing of skin or eyes', 'Abdominal swelling', 'Fatigue', 'Nausea or vomiting', 'Itchy skin'],
                metrics: { accuracy: 88, precision: 80, recall: 90, f1: 85 },
                features: [ {name: 'Albumin-Globulin Ratio', importance: 0.8}, {name: 'Alkaline Phosphatase', importance: 0.7}, {name: 'Total Bilirubin', importance: 0.6}, {name: 'Alanine Aminotransferase', importance: 0.55}, {name: 'Gender', importance: 0.4} ]
            }
        };

        const diseaseSymptomData = {
            'Heart Disease': ['chest_pain', 'shortness_of_breath', 'dizziness', 'fatigue'],
            'Diabetes': ['frequent_urination', 'increased_thirst', 'unexplained_weight_loss', 'blurred_vision'],
            'Parkinson\'s Disease': ['tremor_in_hands', 'slowed_movement', 'rigid_muscles'],
            'Liver Disease': ['yellowing_of_skin', 'abdominal_swelling', 'fatigue', 'nausea']
        };

        // DOM Element Cache
        const pipelineDetails = document.getElementById('pipeline-details');
        const stepItems = document.querySelectorAll('.step-item');
        const modelCards = document.querySelectorAll('.model-card');
        const modelDetailTitle = document.getElementById('model-detail-title');
        const modelDetailText = document.getElementById('model-detail-text');
        const metricSelector = document.getElementById('metric-selector');
        const metricExplanation = document.querySelector('#metric-explanation p');
        const diseaseSelector = document.getElementById('disease-selector');
        const diseaseDetailsContainer = document.getElementById('disease-details-container');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        const predictButton = document.getElementById('predict-button');
        const resetButton = document.getElementById('reset-button');
        const predictionForm = document.getElementById('prediction-form');
        const predictionResultDiv = document.getElementById('prediction-result');
        const predictionText = document.getElementById('prediction-text');
        const confidenceBar = document.getElementById('confidence-bar');
        const warningMessage = document.getElementById('warning-message');

        // Global chart instances
        let modelComparisonChart;
        let evaluationMetricChart;
        let diseaseEvalChart;
        let featureImportChart;

        // Register the datalabels plugin with Chart.js globally
        Chart.register(ChartDataLabels);

        // --- Chart Initialization Functions ---
        const setupModelComparisonChart = () => {
            const ctx = document.getElementById('modelComparisonChart').getContext('2d');
            modelComparisonChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Accuracy', 'Interpretability', 'Complexity', 'Speed'],
                    datasets: [{
                        label: 'Model Characteristics',
                        data: [0, 0, 0, 0],
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(59, 130, 246, 1)'
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                            grid: { color: 'rgba(0, 0, 0, 0.1)' },
                            pointLabels: { font: { size: 14 } },
                            suggestedMin: 0,
                            suggestedMax: 5,
                            ticks: {
                                stepSize: 1,
                                backdropColor: 'rgba(0,0,0,0)'
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (context) => `${context.dataset.label}: ${context.raw}`
                            }
                        }
                    }
                }
            });
        };

        const setupEvaluationMetricChart = () => {
            const ctx = document.getElementById('evaluationMetricChart').getContext('2d');
            evaluationMetricChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Metric Score'],
                    datasets: [{
                        label: 'Score',
                        data: [0],
                        backgroundColor: '#3B82F6',
                        borderColor: '#2563EB',
                        borderWidth: 1,
                        borderRadius: 5,
                    }]
                },
                options: {
                    indexAxis: 'y',
                    maintainAspectRatio: false,
                    scales: {
                        x: { beginAtZero: true, max: 100, grid: { display: false } },
                        y: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false },
                        datalabels: {
                            anchor: 'end',
                            align: 'end',
                            formatter: (value) => value + '%',
                            color: '#111827',
                            font: { size: 16, weight: 'bold' }
                        }
                    }
                }
            });
        };

        const setupDiseaseCharts = () => {
            // Destroy existing chart instances before creating new ones
            if (diseaseEvalChart) { diseaseEvalChart.destroy(); }
            if (featureImportChart) { featureImportChart.destroy(); }

            const diseaseEvalCtx = document.getElementById('diseaseEvaluationChart').getContext('2d');
            const featureImportCtx = document.getElementById('featureImportanceChart').getContext('2d');
            
            diseaseEvalChart = new Chart(diseaseEvalCtx, {
                type: 'bar',
                data: {
                    labels: ['Accuracy', 'Precision', 'Recall', 'F1-Score'],
                    datasets: [{
                        label: 'Metric Score (%)',
                        data: [],
                        backgroundColor: ['#6EE7B7', '#93C5FD', '#FCD34D', '#A5B4FC'],
                        borderRadius: 5
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, max: 100 },
                        x: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });

            featureImportChart = new Chart(featureImportCtx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Feature Importance Score (Relative)',
                        data: [],
                        backgroundColor: '#3B82F6',
                        borderRadius: 5
                    }]
                },
                options: {
                    indexAxis: 'y',
                    maintainAspectRatio: false,
                    scales: {
                        x: { beginAtZero: true, max: 1 },
                        y: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        };

        // --- Event Handlers and Update Functions ---

        // Update pipeline section on click
        let activeStep = null;
        stepItems.forEach(item => {
            item.addEventListener('click', () => {
                const step = item.dataset.step;
                // Toggle active state
                if (activeStep === step) {
                    item.classList.remove('active');
                    pipelineDetails.innerHTML = `<p class="text-center text-gray-500">Click a step to see details here.</p>`;
                    activeStep = null;
                } else {
                    stepItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    pipelineDetails.innerHTML = `
                        <div class="text-center transition-opacity duration-500 opacity-0 animate-fadeIn">
                            <h3 class="text-xl font-bold text-primary">${pipelineContent[step].title}</h3>
                            <p class="mt-2 text-secondary">${pipelineContent[step].text}</p>
                        </div>
                    `;
                    // Simple animation effect
                    setTimeout(() => {
                        pipelineDetails.querySelector('div').classList.remove('opacity-0');
                    }, 50);
                    activeStep = step;
                }
            });
        });

        // Update model chart and details on card click
        modelCards.forEach(card => {
            card.addEventListener('click', () => {
                const modelKey = card.dataset.model;
                const data = modelData[modelKey];
                modelDetailTitle.textContent = data.name;
                modelDetailText.textContent = data.text;
                modelComparisonChart.data.datasets[0].data = data.scores;
                modelComparisonChart.data.datasets[0].label = data.name;
                modelComparisonChart.update();
                // Add active class to the selected card
                modelCards.forEach(c => c.classList.remove('active'));
                card.classList.add('active');
            });
        });

        // Update evaluation chart and explanation on dropdown change
        const updateMetricView = (metricKey) => {
            const data = metricData[metricKey];
            evaluationMetricChart.data.datasets[0].data = [data.score];
            evaluationMetricChart.update();
            metricExplanation.textContent = data.text;
        };

        metricSelector.addEventListener('change', (e) => {
            updateMetricView(e.target.value);
        });

        // Update disease-specific charts and content on dropdown change
        const updateDiseaseView = (diseaseKey) => {
            const disease = diseaseModelsData[diseaseKey];
            diseaseDetailsContainer.innerHTML = `
                <h3 class="text-xl font-bold text-primary mb-2">${disease.name} Prediction</h3>
                <p class="text-secondary text-sm">Symptoms are key indicators for an ML model. For ${disease.name.toLowerCase()}, the most impactful features often include:</p>
                <ul id="symptoms-list" class="list-disc list-inside mt-2 text-secondary text-sm space-y-1">
                    ${disease.symptoms.map(s => `<li>${s}</li>`).join('')}
                </ul>
                <p class="text-secondary text-sm mt-4">The recommended model for this use case is a <span class="font-semibold text-blue-600">${disease.model}</span>, due to its effectiveness in finding complex patterns in patient data.</p>
            `;

            diseaseEvalChart.data.datasets[0].data = Object.values(disease.metrics);
            diseaseEvalChart.update();

            const features = disease.features.map(f => f.name);
            const importance = disease.features.map(f => f.importance);
            featureImportChart.data.labels = features;
            featureImportChart.data.datasets[0].data = importance;
            featureImportChart.update();
        };

        diseaseSelector.addEventListener('change', (e) => {
            updateDiseaseView(e.target.value);
        });

        // Handle mobile menu toggle
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // ** UPDATED PREDICTION APP LOGIC **
        predictButton.addEventListener('click', async (e) => {
            e.preventDefault();
            const selectedSymptoms = Array.from(predictionForm.elements['symptoms'])
                                          .filter(checkbox => checkbox.checked)
                                          .map(checkbox => checkbox.value);
            
            if (selectedSymptoms.length === 0) {
                // Handle no symptoms selected
                predictionResultDiv.classList.add('hidden');
                warningMessage.classList.add('hidden');
                alert('Please select at least one symptom to make a prediction.');
                return;
            }

            // Show a loading state
            predictButton.disabled = true;
            predictButton.textContent = 'Predicting...';
            predictionResultDiv.classList.add('hidden');
            warningMessage.classList.add('hidden');
            
            try {
                // Send the selected symptoms to the Flask backend
                const response = await fetch('http://127.0.0.1:5000/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ symptoms: selectedSymptoms }),
                });

                if (!response.ok) {
                    throw new Error('Failed to fetch prediction from the server.');
                }

                const result = await response.json();

                // Display the prediction result344345346347348349350351352353354355356357358359360361362363364365366367368369370371372$0
                predictionText.textContent = `Based on your symptoms, the predicted disease is: ${result.predicted_disease} with ${result.confidence}% confidence.`;
                confidenceBar.style.width = `${result.confidence}%`;
                predictionResultDiv.classList.remove('hidden');
                warningMessage.classList.remove('hidden');

            } catch (error) {
                console.error('Prediction failed:', error);
                alert('An error occurred. Please try again later.');
            } finally {
                // Re-enable the button regardless of the outcome
                predictButton.disabled = false;
                predictButton.textContent = 'Predict Disease';
            }
        });

        resetButton.addEventListener('click', () => {
            predictionForm.reset();
            predictionResultDiv.classList.add('hidden');
            warningMessage.classList.add('hidden');
            predictionText.textContent = '';
            confidenceBar.style.width = '0%';
        });


        // Initialize all charts and set initial view
        setupModelComparisonChart();
        setupEvaluationMetricChart();
        setupDiseaseCharts();
        updateMetricView('recall');
        updateDiseaseView(diseaseSelector.value);

        // Intersection Observer for active navigation links
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.6
        };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, observerOptions);
        sections.forEach(section => {
            observer.observe(section);
        });
    });
</script>


</body>
</html>
